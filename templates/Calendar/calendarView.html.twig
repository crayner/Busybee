{# src/Busybee/InstituteBundle/Resources/views/Calendar/calendarView.html.twig #}

{% trans_default_domain "Calendar" %}

{% set row = 1 %}
<div class="calendarBody"
     style="background-image: url({{ asset(get_setting('Org.Logo.Transparent', 'img/bee-transparent.png')) }});">
    <h3 style="text-align: center; ">{{ get_setting('Org.Name.long') }} {{ calendar.name }}
        {% if calendars|length > 0 %}
            <select name='calendar' id='calendar' style="float: left; width: 70px" class="form-control form-control-sm">
                {% for calendarOption in calendars %}
                    <option value="{{ calendarOption.id }}"{% if calendarOption.id == calendar.id %} selected{% endif %}>{{ calendarOption.name }}</option>
                {% endfor %}
            </select>
        {% endif %}
        {% if closeWindow is defined and closeWindow %}
            {{ closeButton()|raw }}
        {% else %}
            {{ returnButton({title: 'calendar.year.return', transDomain: 'Calendar', windowOpen: {route: path('calendar_years')}})|raw }}
        {% endif %}
        {{ miscButton({transDomain: 'Calendar', title: 'calendar.display.print', class: 'halflings halflings-print btn btn-info', javascript: {function: 'printCalendar', options: {id: calendar.id}}})|raw }}

    </h3>
    {% for month in year.months %}
        {% if row == 1 %}<div class="row">{% endif %}
        <div class="col-3 col-3 calendarMonth">
            <table>
                <tr>
                    <th colspan="8">
                        {{ month.fullName }}
                    </th>
                </tr>
                <tr class="calendarWeek">
                    <td><strong>{{ 'Wk'|trans }}</strong></td>
                    {% for week_name in year.weeknameShorts %}
                        <td class="dayBold">
                            {{ week_name }}
                        </td>
                    {% endfor %}
                </tr>
                {% for week in month.weeks %}
                    <tr class="calendarWeek">
                        <td class="dayBold">
                            {{ week.number }}
                        </td>
                        {% for day in week.days %}

                            {% if day.inMonth(month) %}
                                <td{{ get_dayClass(day)|raw }}{% if day.prompt is not empty %} title="{{ day.prompt }}"{% endif %}>
                                    {{ day.date | date('j') }}
                                </td>
                            {% else %}
                                <td class="noBorder">
                                    &nbsp;
                                </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </table>
        </div>
        {% if row == 4 %}
            </div>
            {% set row = 0 %}
        {% endif %}
        {% set row = row + 1 %}
    {% endfor %}
</div>
{% set row = 1 %}

{% for day in calendar.specialDays %}
    {% if row == 1 %}<div class="row">{% endif %}
    <div class="col-3 calendarMonth">
        {{ day.day|date('D j/M') }}: {{ day.name }}
    </div>
    {% if row == 4 %}
        </div>
        {% set row = 0 %}
    {% endif %}
    {% set row = row + 1 %}
{% endfor %}
{% if row > 1 %}</div>{% endif %}

<div class="row">
    <div class="col-2 termBreak calendarMonth">
        Term Break
    </div>
    <div class="col-2 isClosed calendarMonth">
        Closed
    </div>
    <div class="col-2 isSpecial calendarMonth">
        Special
    </div>
    <div class="col-6 text-right calendarMonth">
        {{ 'Generated by Busybee'|trans({}, 'home') }}
    </div>
</div>

