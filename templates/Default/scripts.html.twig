<!-- core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
{%  trans_default_domain 'home' %}

<script src="{{ asset('js/jquery.min.js') }}"></script>
<script src="{{ asset('js/tether.min.js') }}"></script>
<script src="{{ asset('js/bootstrap.bundle.min.js') }}"></script>
<script src="{{ asset('js/jquery-ui.min.js') }}"></script>


{% if app.getUser is not empty %}
    {% include '@HillrangeSecurity/security/scripts.html.twig' %}
    <script src={{ asset('js/bootstrap-submenu.min.js') }}></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {

            var hide = '{{ hideSection(app.request.get('_route')) }}';
            if (hide) {
                $('.hideSection').fadeOut(5);
            }

        });
        $('[data-submenu]').submenupicker();

        function menuSectionSlide() {
            var scroll_top = $(window).scrollTop();
            if (scroll_top >= 247) { // the detection!
                $('#sectionMenuContainer').addClass('is-sticky');
            } else {
                $('#sectionMenuContainer').removeClass('is-sticky');
            }
        }

        $(window).scroll(menuSectionSlide);

        $(".alert").alert();
    </script>
{% endif %}
<!-- fold Menu -->
<script type="text/javascript" charset="utf-8">

    $('.foldMenu').on('click', function(){
        var that = this;

        if ($('.foldMenu').hasClass('fa-times-circle')) {

            $.ajax({
                url: '{{ path('section_menu_display', {display: 'hide'}) }}',
                type: 'POST'
            });
            setTimeout(function() {
                console.log(that.parentNode);
                that.parentNode.style.flex = 'auto';
                that.parentNode.style['max-width'] = 'none';}, 200);
        } else {
            $.ajax({
                url: '{{ path('section_menu_display', {display: 'show'}) }}',
                type: 'POST'
            });
            setTimeout(function() {
                console.log(that.parentNode);
                that.parentNode.style = '';}, 200);
        }
        $('.foldMenu').toggleClass('fa-times-circle fa-bars fas far');
    });

    $(document).ready(function () {
        var show = '{{ app.session.get('showSectionMenu')|default(0) }}';

        if (! show) {
            $('.foldMenu').click();
        }

        var hideSideBar = '{{ get_section()|length }}';

        var open = $('.foldMenu').hasClass('fa-times-circle');

        if (open) {
            if (hideSideBar == '0') {
                $('.foldMenu').toggleClass('fa-times-circle fa-bars fas far');
                $('#contentContainer').css('flex', 'auto');
                $('#contentContainer').css('max-width', 'none');
            }
        }

    });

</script>
{% for xx in getScripts() %}
    {% include xx %}
{% endfor %}
<!-- core JavaScript end -->