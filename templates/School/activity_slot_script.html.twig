{% trans_default_domain "School" %}

<script type="text/javascript" language="JavaScript">
    $(".slotCollection").collection({
        name_prefix: '{{ form.activitySlots.vars.full_name }}',
        allow_up: false,
        allow_down: false,
        add: '{{ addButton({transDomain: 'School', title: 'activity.activity_slot.add.title'})|raw }}',
        remove: '{{ deleteButton({transDomain: 'School', title: 'activity.activity_slot.remove.title'})|raw }}',
        add_at_the_end: true
    });

    $(document).ready(function () {
        {% for slot in form.activitySlots %}
            var id = '{{ slot.vars.name }}';
            var value = $('#activity_activitySlots_'+id+'_type').attr('value');

            if (value == "1") {
                $('#external_' + id).fadeIn(200);
                $('#internal_' + id).fadeOut(20);

            }
            if (value == "0") {
                $('#external_' + id).fadeOut(20);
                $('#internal_' + id).fadeIn(200);
            }
        {% endfor %}
    });

    $(document).on('change', 'input[type="hidden"]', function () {
        var id = $(this).attr('id');
        id = id.replace('activity_activitySlots_', '');
        id = id.replace('_type', '');

        if ($(this).attr('value') == "0") {
            $('#external_' + id).fadeIn(200);
            $('#internal_' + id).fadeOut(20);
        }
        if ($(this).attr('value') == "1") {
            $('#external_' + id).fadeOut(20);
            $('#internal_' + id).fadeIn(200);
        }
    });

</script>
